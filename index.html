<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="pragma" content="no-cache">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="استمتع بلعبة طبول الحرب التفاعلية! تحدَّ فريقك في مواجهة مليئة بالإثارة والمفاجآت مع مؤثرات صوتية ممتعة.">
    <meta name="keywords" content="لعبة طبول الحرب, لعبة الحرب التفاعلية, ألعاب فرق, تحديات جماعية, ألعاب عربية, لعبة تنافسية, طبول الحرب اونلاين">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="لعبة طبول الحرب - تحدي الفرق الممتع">
    <meta property="og:description" content="انضم إلى لعبة طبول الحرب وتحدَّ فريقك في تجربة تفاعلية مليئة بالإثارة!">
    <meta property="og:image" content="https://moiyed.github.io/moiyed/icons/tt.png">
    <meta property="og:url" content="https://moiyed.github.io/moiyed/">
    <meta property="og:type" content="website">
    <title>لعبة طبول الحرب</title>
    <link rel="shortcut icon" href="icons/sword.png">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff; /* تغيير لون الخلفية الافتراضية إلى أبيض غامق */
            background-attachment: fixed;
            transition: background-image 0.5s ease, background-color 0.5s ease;
            text-align: center;
            margin: 0;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            filter: blur(5px) brightness(0.8);
            z-index: -1;
        }
        body[unresolved] {
            opacity: 0;
            display: block;
            overflow: hidden;
            position: relative;
        }
        #mainBoard {
            border: 2px solid #444242;
            background-color: #d1d1d1;
            position: relative;
            transition: background-color 0.5s ease;
            z-index: 1;
        }
        #mainBoard.shake {
            animation: shake 0.3s ease-in-out infinite;
        }
        @keyframes shake {
            0% { transform: translate(0, 0); }
            25% { transform: translate(-3px, 3px); }
            50% { transform: translate(3px, -3px); }
            75% { transform: translate(-3px, -3px); }
            100% { transform: translate(0, 0); }
        }
        #mainBoard td {
            width: 75px;
            height: 60px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.1s ease;
            z-index: 1;
        }
        #mainBoard td.shake {
            animation: shake 0.3s ease-in-out infinite;
        }
        #mainBoard img {
            width: 50px;
            height: 50px;
            transition: transform 0.1s ease;
            z-index: 1;
        }
        #mainBoard img.shake {
            animation: shake 0.3s ease-in-out infinite;
        }
        #centralTd {
            background-color: #211a0542;
            width: 480px;
            height: 400px;
            position: relative;
            z-index: 1;
        }
        #centralTd #imageDiv {
            position: relative;
            width: 100%;
            height: 100%;
        }
        #centralTd img {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        #centralTd #WeaponPower {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            opacity: 0;
        }
        .score, .teamName {
            width: 117px;
            padding: 5px;
            margin: 5px;
            text-align: center;
            border: 3px solid #ccc;
            font-size: 36px;
            transition: transform 0.1s ease;
            z-index: 1;
        }
        .score.shake, .teamName.shake {
            animation: shake 0.3s ease-in-out infinite;
        }
        .coloredCircle {
            width: 30px;
            height: 30px;
            margin: 5px;
            cursor: pointer;
            display: inline-block;
            z-index: 1;
        }
        .popup {
            position: relative;
            display: inline-block;
            cursor: pointer;
            user-select: none;
            z-index: 1;
        }
        .popup .popuptext {
            visibility: hidden;
            width: 160px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -80px;
        }
        .popup .popuptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }
        .popup .show {
            visibility: visible;
            animation: fadeIn 1s;
        }
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .blue { color: #0101DF; }
        .red { color: #da0000; }
        .logo {
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .logo img {
            width: 300px;
            height: auto;
        }
        #resetButton, #stopMusicButton, #changeColorsButton, #toggleSoundButton {
            width: 120px;
            height: 60px;
            cursor: pointer;
            margin: 10px;
            transition: filter 0.3s ease;
            z-index: 1;
        }
        #resetButton:hover, #stopMusicButton:hover, #changeColorsButton:hover, #toggleSoundButton:hover {
            filter: brightness(1.2);
        }
        #backgroundSelect {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #333;
            color: #fff;
            border: none;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s ease;
            z-index: 1;
        }
        #backgroundSelect:hover {
            background-color: #555;
        }
        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            z-index: 1;
        }
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 20px;
            background: #ffd700;
            opacity: 0.8;
            animation: fall 5s linear infinite;
        }
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        #gameOverMessage {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 20px;
            font-size: 24px;
            border-radius: 10px;
            z-index: 1001;
            display: none;
        }
        #playWinSoundButton {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        #playWinSoundButton:hover {
            background-color: #45a049;
        }
        #soundNotification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            z-index: 1002;
            display: none;
            font-size: 18px;
        }
        #teamSelection {
            display: block;
            margin: 20px auto;
            padding: 10px;
            background-color: #f0f0f0;
            border: 2px solid #333;
            border-radius: 5px;
            text-align: center;
            transition: opacity 0.3s ease;
            z-index: 1;
        }
        #teamSelection.hidden {
            display: none;
            opacity: 0;
        }
        #leftArrow, #rightArrow {
            transition: opacity 0.3s ease, display 0s;
        }
        @media (max-width: 768px) {
            #mainBoard td { 
                width: 50px;
                height: 40px; 
            }
            #mainBoard img { 
                width: 30px; 
                height: 30px; 
            }
            #centralTd { 
                width: 360px;
                height: 280px;
            }
            #centralTd img { 
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            .score, .teamName { 
                width: 100px; 
                font-size: 34px;
            }
            .logo img {
                width: 150px;
                height: auto;
            }
        }
        .color-box {
            display: none;
            background-color: #fff;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 10px;
            margin: 10px auto;
            width: fit-content;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1;
        }
        .color-box.show {
            display: block;
        }
        .color-box .coloredCircle {
            width: 40px;
            height: 40px;
            margin: 5px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .color-box .coloredCircle:hover {
            transform: scale(1.2);
        }
        .teams-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            max-width: 600px;
            margin: 0 auto;
            z-index: 1;
        }
        .teams-wrapper img#colorSettings {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        .team-container {
            position: relative;
            text-align: center;
            height: 80px;
            width: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .team-container img.arrow {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
        }
        .team-inputs {
            display: flex;
            justify-content: center;
            gap: 5px;
        }
        #nukeEffect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 69, 0, 0.3);
            z-index: 999;
            display: none;
            pointer-events: none;
            transition: opacity 1s ease-out; /* إضافة انتقال تدريجي للتلاشي */
            opacity: 1;
        }
        #nukeEffect.fade-out {
            opacity: 0;
        }
        .rocket {
            position: absolute;
            width: 2px;
            height: 20px;
            background-color: #ff4500;
            animation: fallRocket 2s linear forwards;
        }
        @keyframes fallRocket {
            0% { transform: translateY(-100vh); }
            100% { transform: translateY(100vh); }
        }
        .explosion {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, rgba(255, 69, 0, 0.8) 0%, rgba(255, 140, 0, 0) 70%);
            border-radius: 50%;
            animation: explode 0.5s ease-out forwards;
            opacity: 0;
        }
        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        .smoke {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(128, 128, 128, 0.3) 0%, rgba(0, 0, 0, 0) 70%);
            border-radius: 50%;
            animation: smokeFade 2s ease-out forwards;
            opacity: 0;
        }
        @keyframes smokeFade {
            0% { transform: scale(0); opacity: 0.5; }
            100% { transform: scale(2); opacity: 0; }
        }
        .flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 1000;
            animation: flashAnimation 0.2s ease-out forwards;
            display: none;
        }
        @keyframes flashAnimation {
            0% { opacity: 0.8; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body onload="showTeamSelection()">
    <div class="logo" style="margin-top: 1px;">
        <a href="#"><img src="icons/logo.gif" alt="شعار اللعبة"></a>
    </div>

    <div class="popup" onclick="myFunction()" style="margin-top: 0px; margin-bottom: 10px;">
        <span class="popuptext" id="myPopup">Moiyed Al Aiyeed</span>
        <span style="font-weight: bold; background: linear-gradient(to right, black 100%, silver 0%); -webkit-background-clip: text; color: transparent;">Moiyed Al Aiyeed</span>
    </div>

    <div id="teamSelection">
        <h3>اختر الفريق الذي يبدأ:</h3>
        <button onclick="startGame('left')">الفريق الأحمر</button>
        <button onclick="startGame('right')">الفريق الأزرق</button>
    </div>

    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <th>
                <div class="teams-wrapper">
                    <div class="team-container">
                        <img src="icons/arrow.png" id="leftArrow" class="arrow" style="display: none;">
                        <div class="team-inputs">
                            <input value="200" class="score red" id="leftScore" size="20" type="text" readonly>
                            <input value="الشّمال" class="teamName red" id="leftTeam" size="20" type="text">
                        </div>
                    </div>
                    <img alt09 alt="إعدادات الألوان" src="icons/struggle.gif" id="colorSettings" style="width: 50px; height: 50px; align-self: center;">
                    <div class="team-container">
                        <img src="icons/arrow.png" id="rightArrow" class="arrow" style="display: none;">
                        <div class="team-inputs">
                            <input value="اليَمين" class="teamName blue" id="rightTeam" size="20" type="text">
                            <input value="200" class="score blue" id="rightScore" size="20" type="text" readonly>
                        </div>
                    </div>
                </div>

                <table id="mainBoard" align="center" border="0" cellpadding="0" cellspacing="0">
                    <tbody>
                        <tr>
                            <td id="tab1" onclick="go(this.id)"><img alt="item1" src="icons/apple.png"></td>
                            <td id="tab2" onclick="go(this.id)"><img alt="item2" src="icons/six.png"></td>
                            <td id="tab3" onclick="go(this.id)"><img alt="item3" src="icons/five.png"></td>
                            <td id="tab4" onclick="go(this.id)"><img alt="item4" src="icons/four.png"></td>
                            <td id="tab5" onclick="go(this.id)"><img alt="item5" src="icons/three.png"></td>
                            <td id="tab6" onclick="go(this.id)"><img alt="item6" src="icons/two.png"></td>
                            <td id="tab7" onclick="go(this.id)"><img alt="item7" src="icons/one.png"></td>
                            <td id="tab8" onclick="go(this.id)"><img alt="item8" src="icons/whatsapp.png"></td>
                        </tr>
                        <tr>
                            <td id="tab9" onclick="go(this.id)"><img alt="item9" src="icons/huawei.png"></td>
                            <td id="tab10" onclick="go(this.id)"><img alt="item10" src="icons/twelve.png"></td>
                            <td id="tab11" onclick="go(this.id)"><img alt="item11" src="icons/eleven.png"></td>
                            <td id="tab12" onclick="go(this.id)"><img alt="item12" src="icons/ten.png"></td>
                            <td id="tab13" onclick="go(this.id)"><img alt="item13" src="icons/nine.png"></td>
                            <td id="tab14" onclick="go(this.id)"><img alt="item14" src="icons/eight.png"></td>
                            <td id="tab15" onclick="go(this.id)"><img alt="item15" src="icons/seven.png"></td>
                            <td id="tab16" onclick="go(this.id)"><img alt="item16" src="icons/facebook.png"></td>
                        </tr>
                        <tr>
                            <td id="tab17" onclick="go(this.id)"><img alt="item17" src="icons/barcelona.png"></td>
                            <td colspan="6" rowspan="5" id="centralTd">
                                <div id="imageDiv">
                                    <img src="icons/tt.png" alt="عنصر مركزي" id="pic00">
                                    <input id="WeaponPower" type="text" placeholder="قوة السلاح">
                                </div>
                            </td>
                            <td id="tab18" onclick="go(this.id)"><img alt="item18" src="icons/skype.png"></td>
                        </tr>
                        <tr>
                            <td id="tab19" onclick="go(this.id)"><img alt="item19" src="icons/real-madrid.png"></td>
                            <td id="tab20" onclick="go(this.id)"><img alt="item20" src="icons/social.png"></td>
                        </tr>
                        <tr>
                            <td id="tab21" onclick="go(this.id)"><img alt="item21" src="icons/gmail.png"></td>
                            <td id="tab22" onclick="go(this.id)"><img alt="item22" src="icons/messenger.png"></td>
                        </tr>
                        <tr>
                            <td id="tab23" onclick="go(this.id)"><img alt="item23" src="icons/google-maps.png"></td>
                            <td id="tab24" onclick="go(this.id)"><img alt="item24" src="icons/twitter.png"></td>
                        </tr>
                        <tr>
                            <td id="tab25" onclick="go(this.id)"><img alt="item25" src="icons/starbucks.png"></td>
                            <td id="tab26" onclick="go(this.id)"><img alt="item26" src="icons/tiktok.png"></td>
                        </tr>
                        <tr>
                            <td id="tab27" onclick="go(this.id)"><img alt="item27" src="icons/netflix.png"></td>
                            <td id="tab28" onclick="go(this.id)"><img alt="item28" src="icons/lion.png"></td>
                            <td id="tab29" onclick="go(this.id)"><img alt="item29" src="icons/bee.png"></td>
                            <td id="tab30" onclick="go(this.id)"><img alt="item30" src="icons/butterfly.png"></td>
                            <td id="tab31" onclick="go(this.id)"><img alt="item31" src="icons/cow.png"></td>
                            <td id="tab32" onclick="go(this.id)"><img alt="item32" src="icons/hookah.png"></td>
                            <td id="tab33" onclick="go(this.id)"><img alt="item33" src="icons/elephant.png"></td>
                            <td id="tab34" onclick="go(this.id)"><img alt="item34" src="icons/snapchat.png"></td>
                        </tr>
                        <tr>
                            <td id="tab35" onclick="go(this.id)"><img alt="item35" src="icons/lebanon.png"></td>
                            <td id="tab36" onclick="go(this.id)"><img alt="item36" src="icons/iraq.png"></td>
                            <td id="tab37" onclick="go(this.id)"><img alt="item37" src="icons/algeria.png"></td>
                            <td id="tab38" onclick="go(this.id)"><img alt="item38" src="icons/jordan (1).png"></td>
                            <td id="tab39" onclick="go(this.id)"><img alt="item39" src="icons/saudi-arabia.png"></td>
                            <td id="tab40" onclick="go(this.id)"><img alt="item40" src="icons/morocco.png"></td>
                            <td id="tab41" onclick="go(this.id)"><img alt="item41" src="icons/palestine.png"></td>
                            <td id="tab42" onclick="go(this.id)"><img alt="item42" src="icons/syria.png"></td>
                        </tr>
                    </tbody>
                </table>
                <div class="button-container">
                    <img id="resetButton" src="icons/restart.png" onclick="resetGame()" alt="إعادة تعيين اللعبة">
                    <img id="stopMusicButton" src="icons/stop.png" onclick="stopMusic()" alt="إيقاف الموسيقى">
                    <img id="changeColorsButton" src="icons/change.png" onclick="toggleColorBox()" alt="تغيير الألوان">
                    <select id="backgroundSelect" onchange="changeBackground()">
                        <option value="default">افتراضي (أبيض غامق)</option>
                        <option value="lake">بحيرة هادئة</option>
                        <option value="rainy_window">نافذة ماطرة</option>
                        <option value="night_balloon">منطاد ليلي</option>
                        <option value="galaxy_sky">سماء المجرة</option>
                        <option value="glowing_heart">قلب مضيء</option>
                        <option value="mountain_sunset">غروب جبلي</option>
                        <option value="vintage_map">خريطة عتيقة</option>
                        <option value="foggy_forest">غابة ضبابية</option>
                        <option value="foggy_mountains">جبال ضبابية</option>
                        <option value="turquoise_sea">بحر فيروزي</option>
                    </select>
                </div>
                <div style="text-align: center; margin: 10px 0;">لتوقيف/تشغيل الأصوات نهائياً</div>
                <div class="button-container">
                    <img id="toggleSoundButton" src="icons/switch-on.png" onclick="toggleSound()" alt="تشغيل/إيقاف الأصوات">
                </div>
                <div id="colorBox" class="color-box">
                    <img class="coloredCircle" alt="red" onclick="changeBoardColor('#FF0000', '#d1d1d1')" src="icons/redCircle.png">
                    <img class="coloredCircle" alt="blue" onclick="changeBoardColor('#00CED1', '#d1d1d1')" src="icons/trkwazCircle.png">
                    <img class="coloredCircle" alt="green" onclick="changeBoardColor('#008000', '#d1d1d1')" src="icons/greenCircle.png">
                    <img class="coloredCircle" alt="purple" onclick="changeBoardColor('#800080', '#d1d1d1')" src="icons/purpleCircle.png">
                    <img class="coloredCircle" alt="gray" onclick="changeBoardColor('#808080', '#3a4659')" src="icons/grayCircle.png">
                    <img class="coloredCircle" alt="palBlue" onclick="changeBoardColor('#87CEEB', '#c2bbba')" src="icons/palBlueCircle.png">
                    <img class="coloredCircle" alt="pink" onclick="changeBoardColor('#FF69B4', '#33222a')" src="icons/pinkCircle.png">
                </div>
            </th>
        </tr>
    </table>

    <div id="confetti"></div>
    <div id="gameOverMessage">
        <div id="gameOverText"></div>
        <button id="playWinSoundButton">🎉 استمع إلى صوت الفوز!</button>
    </div>
    <div id="soundNotification"></div>
    <div id="nukeEffect"></div>
    <div id="flash" class="flash"></div>

    <center>
        <p><b><a href="#">جميع الحقوق محفوظة لعبة الحرب | طبول الحرب</a><br>
        <a href="#"> مطور اللعبة : Moiyed Al Aiyeed</a></b></p>
    </center>

    <script>
        const pointsData = [
            { image: "points/0.png", points: 0, sound: "sounds/1.mp3", type: "normal" },
            { image: "points/0 (2).png", points: 0, sound: "sounds/2.mp3", type: "normal" },
            { image: "points/0 (3).png", points: 0, sound: "sounds/3.mp3", type: "normal" },
            { image: "points/3.png", points: 3, sound: "sounds/5.mp3", type: "normal" },
            { image: "points/1.png", points: 1, sound: "sounds/فوق قدرتنا.mp3", type: "normal" },
            { image: "points/1 (2).png", points: 1, sound: "sounds/4.mp3", type: "normal" },
            { image: "points/1 (3).png", points: 1, sound: "sounds/n-mbswt-kd-wn-khnzyr.mp3", type: "normal" },
            { image: "points/4 (1).png", points: 4, sound: "sounds/oh-no-no-no-no-laugh.mp3", type: "normal" },
            { image: "points/-3.png", points: -3, sound: "sounds/موسيقى الفشل.mp3", type: "normal" },
            { image: "points/2.png", points: 2, sound: "sounds/نهاية ماريو.mp3", type: "normal" },
            { image: "points/8 (2).png", points: 8, sound: "sounds/rkz-y-fshl.mp3", type: "normal" },
            { image: "points/15 (2).png", points: 15, sound: "sounds/انت ومعزبك.mp3", type: "normal" },
            { image: "points/-4.png", points: -4, sound: "sounds/رقم اربعة هيلب.mp3", type: "normal" },
            { image: "points/25.png", points: 25, sound: "sounds/رجع ماهر الاسد.mp3", type: "normal" },
            { image: "points/3 (2).png", points: 3, sound: "sounds/ابن سوريا يلعن ام الشوتطن.mp3", type: "normal" },
            { image: "points/5 (2).png", points: 5, sound: "sounds/انطيني وجهك تف عليه.mp3", type: "normal" },
            { image: "points/25 (2).png", points: 25, sound: "sounds/بهجت صابر.mp3", type: "normal" },
            { image: "points/7 (2).png", points: 7, sound: "sounds/بكرا تندم ياجميل عادل امام.mp3", type: "normal" },
            { image: "points/-5to5.png", points: 1, sound: "sounds/صوت ضحكة.mp3", type: "normal" },
            { image: "points/5.png", points: 5, sound: "sounds/ابن سوريا مين انت شو عم تساوي هون (mp3cut.net).mp3", type: "normal" },
            { image: "points/5 (3).png", points: 5, sound: "sounds/سيد عامود.mp3", type: "normal" },
            { image: "points/9 (2).png", points: 9, sound: "sounds/خلاص خلاص خلاص صراخ مضحك.mp3", type: "normal" },
            { image: "points/7.png", points: 7, sound: "sounds/ابو خليل شكد شفت ناس مدودة.mp3", type: "normal" },
            { image: "points/8.png", points: 8, sound: "sounds/عايزه تفهمي افهمي توفيق عكاشه.mp3", type: "normal" },
            { image: "points/10.png", points: 10, sound: "sounds/بوظة.mp3", type: "normal" },
            { image: "points/10 (2).png", points: 10, sound: "sounds/y-khr-shnw-hdh.mp3", type: "normal" },
            { image: "points/9.png", points: 9, sound: "sounds/76.mp3", type: "normal" },
            { image: "points/12.png", points: 12, sound: "sounds/audioclip-1465563627000-2944.mp3", type: "normal" },
            { image: "points/12 (2).png", points: 12, sound: "sounds/يعني لازم تيجبوا الكلام لنفسيكم يعني.mp3", type: "normal" },
            { image: "points/11.png", points: 11, sound: "sounds/وين جنتي هارون الشمري.mp3", type: "normal" },
            { image: "points/17 (2).png", points: 17, sound: "sounds/لأ لأ لأ انت بتهزر  عمرو اديب.mp3", type: "normal" },
            { image: "points/15.png", points: 15, sound: "sounds/عطيني قطراف راسك.mp3", type: "normal" },
            { image: "points/13.png", points: 13, sound: "sounds/والله ماتقدرلي ياكواد.mp3", type: "normal" },
            { image: "points/18.png", points: 18, sound: "sounds/زبلعجي ولك.mp3", type: "normal" },
            { image: "points/17.png", points: -17, sound: "sounds/انت وين لكيت هاي الكلاوات.mp3", type: "normal" },
            { image: "points/17 (3).png", points: 17, sound: "sounds/اخدو زعيم اخدو.mp3", type: "normal" },
            { image: "points/21.png", points: 21, sound: "sounds/ابن سوريا لو امك تولدك من جديد.mp3", type: "normal" },
            { image: "points/21 (2).png", points: 21, sound: "sounds/ابن سوريا طوبز مشتري ايباد جديد.mp3", type: "normal" },
            { image: "points/20.png", points: 20, sound: "sounds/mbappe-goalllllll.mp3", type: "normal" },
            { image: "points/43.png", points: 43, sound: "sounds/nuclear-alarm-siren.mp3", type: "normal" },
            { image: "points/30.png", points: 30, sound: "sounds/ابن سوريا تمثال من ذهب.mp3", type: "normal" },
            { image: "points/prison.png", points: 0, sound: "sounds/police-siren-for-loop.mp3", type: "prison" }
        ];

        let cellData = {};
        let gameActive = false;
        let skipTurns = 0;
        let lastTeam = '';
        let currentAudio = null;
        let leftTeamHasMask = false;
        let rightTeamHasMask = false;
        let soundsEnabled = true;

        function showTeamSelection() {
            document.getElementById('teamSelection').classList.remove('hidden');
        }

        function startGame(startTeam) {
            gameActive = true;
            lastTeam = startTeam;
            document.getElementById('teamSelection').classList.add('hidden');
            if (startTeam === 'left') {
                document.getElementById('leftArrow').style.display = 'block';
                document.getElementById('rightArrow').style.display = 'none';
            } else {
                document.getElementById('rightArrow').style.display = 'block';
                document.getElementById('leftArrow').style.display = 'none';
            }
            loadOptions();
        }

        function loadOptions() {
            document.getElementById('leftScore').value = '200';
            document.getElementById('rightScore').value = '200';
            skipTurns = 0;
            leftTeamHasMask = false;
            rightTeamHasMask = false;
            soundsEnabled = true;
            document.getElementById('toggleSoundButton').src = 'icons/switch-on.png';
            resetCentralImage();
            distributePoints();
        }

        function distributePoints() {
            cellData = {};
            const cells = Array.from({length: 42}, (_, i) => `tab${i + 1}`);
            const assignments = [...pointsData];
            for (let i = assignments.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [assignments[i], assignments[j]] = [assignments[j], assignments[i]];
            }
            cells.forEach((cellId, index) => {
                cellData[cellId] = {
                    image: assignments[index].image,
                    points: assignments[index].points,
                    sound: assignments[index].sound,
                    type: assignments[index].type,
                    used: false
                };
            });
            resetCellImages();
        }

        function resetCellImages() {
            const originalImages = [
                "icons/apple.png", "icons/six.png", "icons/five.png", "icons/four.png",
                "icons/three.png", "icons/two.png", "icons/one.png", "icons/whatsapp.png",
                "icons/huawei.png", "icons/twelve.png", "icons/eleven.png", "icons/ten.png",
                "icons/nine.png", "icons/eight.png", "icons/seven.png", "icons/facebook.png",
                "icons/barcelona.png",
                "icons/skype.png",
                "icons/real-madrid.png",
                "icons/social.png",
                "icons/gmail.png", "icons/messenger.png", "icons/google-maps.png", "icons/twitter.png",
                "icons/starbucks.png", "icons/tiktok.png", "icons/netflix.png", "icons/lion.png",
                "icons/bee.png", "icons/butterfly.png", "icons/cow.png", "icons/hookah.png",
                "icons/elephant.png", "icons/snapchat.png", "icons/lebanon.png", "icons/iraq.png",
                "icons/algeria.png", "icons/jordan (1).png", "icons/saudi-arabia.png", "icons/morocco.png",
                "icons/palestine.png", "icons/syria.png"
            ];
            for (let i = 1; i <= 42; i++) {
                const cell = document.getElementById(`tab${i}`);
                cell.querySelector('img').src = originalImages[i - 1];
                cellData[`tab${i}`].used = false;
            }
        }

        function myFunction() {
            var popup = document.getElementById("myPopup");
            popup.classList.toggle("show");
        }

        function toggleColorBox() {
            var colorBox = document.getElementById("colorBox");
            colorBox.classList.toggle("show");
        }

        function changeBoardColor(primaryColor, secondaryColor) {
            document.getElementById('mainBoard').style.backgroundColor = primaryColor;
        }

        function stopMusic() {
            if (currentAudio && soundsEnabled) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
        }

        function toggleSound() {
            soundsEnabled = !soundsEnabled;
            document.getElementById('toggleSoundButton').src = soundsEnabled ? 'icons/switch-on.png' : 'icons/switch-off.png';
            const notification = document.getElementById('soundNotification');
            notification.textContent = soundsEnabled ? 'الأصوات مفعلة' : 'الأصوات متوقفة';
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
            if (soundsEnabled) {
                const onSound = new Audio('sounds/notification_on.mp3');
                if (onSound) onSound.play().catch(() => console.log("خطأ في تشغيل صوت التنبيه"));
            } else {
                const offSound = new Audio('sounds/notification_off.mp3');
                if (offSound) offSound.play().catch(() => console.log("خطأ في تشغيل صوت التنبيه"));
            }
        }

        function go(tabId) {
            if (!gameActive || cellData[tabId].used) return;
        
            const leftArrowVisible = document.getElementById('leftArrow').style.display === 'block';
            const rightArrowVisible = document.getElementById('rightArrow').style.display === 'block';
        
            if (!leftArrowVisible && !rightArrowVisible) {
                alert('يرجى تحديد فريق للعب!');
                return;
            }
        
            const data = cellData[tabId];
            let points = data.points;
        
            let leftScore = parseInt(document.getElementById('leftScore').value);
            let rightScore = parseInt(document.getElementById('rightScore').value);
        
            if (data.type === 'prison') {
                skipTurns = 2;
                if (leftArrowVisible) {
                    document.getElementById('WeaponPower').value = 'تم سجن الفريق الأحمر!';
                    document.getElementById('leftArrow').style.display = 'none';
                    document.getElementById('rightArrow').style.display = 'block';
                    lastTeam = 'right';
                } else {
                    document.getElementById('WeaponPower').value = 'تم سجن الفريق الأزرق!';
                    document.getElementById('rightArrow').style.display = 'none';
                    document.getElementById('leftArrow').style.display = 'block';
                    lastTeam = 'left';
                }
            } else {
                document.getElementById('WeaponPower').value = `${points} نقطة`;
            }
        
            document.getElementById('pic00').src = data.image;
        
            if (soundsEnabled) {
                stopMusic();
                const audio = new Audio(data.sound);
                audio.play().catch(() => console.log("خطأ في تشغيل الصوت"));
                currentAudio = audio;
            }
        
            if (data.type !== 'prison') {
                if (data.image === "points/1.png") {
                    if (leftArrowVisible) {
                        leftTeamHasMask = true;
                        document.getElementById('WeaponPower').value = 'الفريق الأحمر حصل على كمامة!';
                    } else {
                        rightTeamHasMask = true;
                        document.getElementById('WeaponPower').value = 'الفريق الأزرق حصل على كمامة!';
                    }
                }
        
                if (leftArrowVisible) {
                    if (data.image === "points/17.png" && rightTeamHasMask) {
                        document.getElementById('WeaponPower').value = 'الفريق الأزرق محمي بكمامة من غاز نيسان!';
                    } else {
                        rightScore -= points;
                    }
                } else {
                    if (data.image === "points/17.png" && leftTeamHasMask) {
                        document.getElementById('WeaponPower').value = 'الفريق الأحمر محمي بكمامة من غاز نيسان!';
                    } else {
                        leftScore -= points;
                    }
                }
                document.getElementById('leftScore').value = leftScore;
                document.getElementById('rightScore').value = rightScore;
            }
        
            document.getElementById(tabId).querySelector('img').src = "icons/close.png";
            cellData[tabId].used = true;
        
            if (leftScore <= -1) {
                setTimeout(() => {
                    showGameOver('left');
                }, 2000);
                return;
            } else if (rightScore <= -1) {
                setTimeout(() => {
                    showGameOver('right');
                }, 2000);
                return;
            }
        
            if (skipTurns > 0) {
                skipTurns--;
            } else {
                if (leftArrowVisible) {
                    document.getElementById('leftArrow').style.display = 'none';
                    document.getElementById('rightArrow').style.display = 'block';
                    lastTeam = 'right';
                } else {
                    document.getElementById('rightArrow').style.display = 'none';
                    document.getElementById('leftArrow').style.display = 'block';
                    lastTeam = 'left';
                }
            }
        
            if (data.points === 43) {
                triggerNukeEffect();
            }
        }

        function resetCentralImage() {
            document.getElementById('pic00').src = "icons/tt.png";
            document.getElementById('WeaponPower').value = '';
        }

        function resetGame() {
            gameActive = false;
            showTeamSelection();
            document.getElementById('leftScore').value = '200';
            document.getElementById('rightScore').value = '200';
            document.getElementById('leftArrow').style.display = 'none';
            document.getElementById('rightArrow').style.display = 'none';
            lastTeam = '';
            skipTurns = 0;
            leftTeamHasMask = false;
            rightTeamHasMask = false;
            soundsEnabled = true;
            document.getElementById('toggleSoundButton').src = 'icons/switch-on.png';
            stopMusic();
            resetCentralImage();
            distributePoints();
            document.getElementById('confetti').style.display = 'none';
            document.getElementById('gameOverMessage').style.display = 'none';
            document.getElementById('nukeEffect').style.display = 'none';
            document.getElementById('flash').style.display = 'none';
        }

        function showGameOver(winningTeam) {
            gameActive = false;
            const confettiContainer = document.getElementById('confetti');
            confettiContainer.innerHTML = '';
            confettiContainer.style.display = 'block';

            for (let i = 0; i < 500; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + 'vw';
                piece.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                piece.style.animationDelay = Math.random() * 3 + 's';
                confettiContainer.appendChild(piece);
            }

            const gameOverMessage = document.getElementById('gameOverMessage');
            const gameOverText = document.getElementById('gameOverText');
            const teamName = document.getElementById(winningTeam === 'left' ? 'leftTeam' : 'rightTeam').value;
            gameOverText.textContent = `مبروك لفريق ${teamName} ${winningTeam === 'left' ? '🔴' : '🔵'}!`;
            gameOverMessage.style.display = 'block';
        }

        function changeBackground() {
            const select = document.getElementById('backgroundSelect');
            const value = select.value;
            const backgrounds = {
                'default': { color: '#E8ECEF', image: '' }, /* تحديث لون الخلفية الافتراضية */
                'lake': { image: 'https://moiyed.github.io/moiyed/backgrounds/lake.jpg' },
                'rainy_window': { image: 'https://moiyed.github.io/moiyed/backgrounds/rainy_window.jpg' },
                'night_balloon': { image: 'https://moiyed.github.io/moiyed/backgrounds/night_balloon.jpg' },
                'galaxy_sky': { image: 'https://moiyed.github.io/moiyed/backgrounds/galaxy_sky.jpg' },
                'glowing_heart': { image: 'https://moiyed.github.io/moiyed/backgrounds/glowing_heart.jpg' },
                'mountain_sunset': { image: 'https://moiyed.github.io/moiyed/backgrounds/mountain_sunset.jpg' },
                'vintage_map': { image: 'https://moiyed.github.io/moiyed/backgrounds/vintage_map.jpg' },
                'foggy_forest': { image: 'https://moiyed.github.io/moiyed/backgrounds/foggy_forest.jpg' },
                'foggy_mountains': { image: 'https://moiyed.github.io/moiyed/backgrounds/foggy_mountains.jpg' },
                'turquoise_sea': { image: 'https://moiyed.github.io/moiyed/backgrounds/turquoise_sea.jpg' }
            };

            const selectedBackground = backgrounds[value];
            if (value === 'default') {
                document.body.style.backgroundImage = 'none';
                document.body.style.backgroundColor = selectedBackground.color;
            } else {
                document.body.style.backgroundImage = `url('${selectedBackground.image}')`;
                document.body.style.backgroundSize = 'cover';
                document.body.style.backgroundPosition = 'center';
                document.body.style.backgroundColor = 'transparent';
            }
        }
function triggerNukeEffect() {
    const nukeEffect = document.getElementById('nukeEffect');
    const flash = document.getElementById('flash');
    const mainBoard = document.getElementById('mainBoard');
    const cells = mainBoard.getElementsByTagName('td');
    const scores = document.getElementsByClassName('score');
    const teamNames = document.getElementsByClassName('teamName');
    const arrows = document.getElementsByClassName('arrow');

    nukeEffect.style.display = 'block';
    flash.style.display = 'block';

    // إضافة صواريخ بكثرة (زيادة عدد الصواريخ إلى 50)
    for (let i = 0; i < 50; i++) {
        const rocket = document.createElement('div');
        rocket.className = 'rocket';
        rocket.style.left = Math.random() * 100 + 'vw';
        rocket.style.animationDuration = (Math.random() * 2 + 2) + 's';
        rocket.style.animationDelay = Math.random() * 2 + 's';
        nukeEffect.appendChild(rocket);

        // إضافة انفجار عند السقوط مع تعديل التوقيت
        setTimeout(() => {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.style.left = rocket.style.left;
            explosion.style.top = '90vh';
            nukeEffect.appendChild(explosion);
            setTimeout(() => explosion.remove(), 500);
        }, (Math.random() * 4 + 2) * 1000);
    }

    // إضافة دخان بكثرة (زيادة عدد الدخان إلى 30 وتعديل الأحجام)
    for (let i = 0; i < 30; i++) {
        const smoke = document.createElement('div');
        smoke.className = 'smoke';
        smoke.style.left = Math.random() * 100 + 'vw';
        smoke.style.top = Math.random() * 100 + 'vh';
        smoke.style.width = Math.random() * 150 + 50 + 'px'; // زيادة الحجم العشوائي للدخان
        smoke.style.height = Math.random() * 150 + 50 + 'px';
        smoke.style.background = `radial-gradient(circle, rgba(128, 128, 128, ${Math.random() * 0.5 + 0.3}) 0%, rgba(0, 0, 0, 0) 70%)`; // زيادة كثافة الدخان
        smoke.style.animationDelay = Math.random() * 2 + 's';
        nukeEffect.appendChild(smoke);
        setTimeout(() => smoke.remove(), 4000); // زيادة مدة بقاء الدخان
    }

    // إضافة اهتزاز
    mainBoard.classList.add('shake');
    for (let cell of cells) {
        cell.classList.add('shake');
        cell.querySelector('img').classList.add('shake');
    }
    for (let score of scores) score.classList.add('shake');
    for (let name of teamNames) name.classList.add('shake');
    for (let arrow of arrows) arrow.classList.add('shake');

    if (soundsEnabled) {
        const boomSound = new Audio('sounds/boom.mp3');
        boomSound.play().catch(() => console.log("خطأ في تشغيل صوت الانفجار"));
    }

    // بدء التلاشي بعد 5 ثوانٍ (يترك 2 ثانية للتلاشي التدريجي)
    setTimeout(() => {
        nukeEffect.classList.add('fade-out');
        flash.style.display = 'none';
        mainBoard.classList.remove('shake');
        for (let cell of cells) {
            cell.classList.remove('shake');
            cell.querySelector('img').classList.remove('shake');
        }
        for (let score of scores) score.classList.remove('shake');
        for (let name of teamNames) name.classList.remove('shake');
        for (let arrow of arrows) arrow.classList.remove('shake');
    }, 5000);

    // إخفاء العنصر تمامًا بعد انتهاء التلاشي التدريجي (7 ثوانٍ)
    setTimeout(() => {
        nukeEffect.style.opacity = '0'; // التأكد من التلاشي التدريجي
        setTimeout(() => {
            nukeEffect.style.display = 'none';
            nukeEffect.innerHTML = '';
            nukeEffect.style.opacity = '1'; // استعادة العرض التدريجي للخلفية الأصلية
        }, 2000); // مدة إضافية 2 ثانية للعودة التدريجية
    }, 7000);
}
    </script>
</body>
</html>
